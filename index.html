<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYBER GRINDER | Sistema de Blindagem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Roboto Mono', monospace; background-color: #000; color: #e5e7eb; overflow-x: hidden; }
        .neon-border { box-shadow: 0 0 15px rgba(34, 197, 94, 0.4); border-color: #22c55e; }
        .fade-in { animation: fadeIn 0.5s ease-in forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .hidden { display: none; }
    </style>
</head>
<body class="min-h-screen p-6 flex flex-col items-center justify-center">

    <script>
        const _URL = "https://njrjrugjzjyukcpzwibt.supabase.co";
        const _KEY = "sb_publishable_IdBN5r7mocZmplhYOlHk9w_0krUOg_E";
        const supabase = supabase.createClient(_URL, _KEY);
    </script>

    <section id="mod-manifesto" class="max-w-2xl text-center space-y-6">
        <header class="opacity-40 text-xs tracking-[0.3em] mb-12">BLINDAGEM DE PATRIMÔNIO</header>
        <div id="manifesto-text" class="space-y-2 text-sm md:text-base"></div>
        <button id="btn-aceitar" disabled class="mt-8 px-8 py-4 border border-gray-800 text-gray-600 rounded transition-all duration-500">AGUARDANDO LEITURA...</button>
    </section>

    <section id="mod-quiz" class="hidden max-w-xl w-full space-y-8 fade-in">
        <div class="text-center">
            <h2 class="text-green-400 font-bold text-xl mb-2">DIAGNÓSTICO DE DNA</h2>
            <p class="text-gray-500 text-xs uppercase tracking-widest">Responda com frieza. O Chip está analisando.</p>
        </div>
        <div id="quiz-container" class="space-y-6">
            </div>
    </section>

    <script>
        const manifesto = [
            "O baralho não tem memória. Eu tenho.",
            "O baralho não sente nada. Você sente.",
            "Aqui, o 'eu acho' morreu.",
            "Só existem posição, range e execução.",
            "Eu sou o Chip. Sua mente será blindada."
        ];

        const perguntas = [
            { id: 1, q: "Qual sua reação após um bad beat de 2 buy-ins?", options: ["Foco no próximo range", "Aumento o volume pra recuperar", "Fecho o software"] },
            { id: 2, q: "Você respeita seu Stop Loss diário?", options: ["Sempre", "Às vezes", "O que é Stop Loss?"] },
            { id: 3, q: "Quantas horas de estudo técnico por semana?", options: ["Mais de 5h", "Menos de 2h", "Só jogo"] },
            { id: 4, q: "Sua banca suporta quantos buy-ins do limite atual?", options: ["+100 bi", "50 bi", "Estou no fio da navalha"] },
            { id: 5, q: "Você joga sob efeito de cansaço ou álcool?", options: ["Nunca", "Raramente", "Frequentemente"] }
        ];

        let respostas = {};

        // Lógica Manifesto
        const mDiv = document.getElementById('manifesto-text');
        const btnAceitar = document.getElementById('btn-aceitar');
        
        let mIndex = 0;
        function typeM() {
            if(mIndex < manifesto.length) {
                let p = document.createElement('p');
                p.innerText = manifesto[mIndex];
                p.className = "fade-in " + (manifesto[mIndex].includes("Chip") ? "text-green-400 font-bold" : "");
                mDiv.appendChild(p);
                mIndex++;
                setTimeout(typeM, 1000);
            } else {
                btnAceitar.disabled = false;
                btnAceitar.innerText = "ACEITAR O COMANDO";
                btnAceitar.className = "mt-8 px-8 py-4 border border-green-500 text-green-500 rounded hover:bg-green-500 hover:text-black transition-all cursor-pointer neon-border";
            }
        }

        btnAceitar.onclick = async () => {
            document.getElementById('mod-manifesto').classList.add('hidden');
            document.getElementById('mod-quiz').classList.remove('hidden');
            startQuiz();
            // Log no console por enquanto (amanhã ligamos a tabela)
            console.log("Contrato aceito pelo Jader.");
        };

        function startQuiz() {
            const container = document.getElementById('quiz-container');
            perguntas.forEach((item, i) => {
                let div = document.createElement('div');
                div.className = "p-4 border border-gray-900 rounded bg-gray-950";
                div.innerHTML = `<p class="mb-4 text-sm">${item.q}</p>
                    <div class="grid grid-cols-1 gap-2">
                        ${item.options.map(opt => `<button onclick="saveAns(${item.id}, '${opt}')" class="text-left p-2 text-xs border border-gray-800 hover:border-green-500 transition-all">${opt}</button>`).join('')}
                    </div>`;
                container.appendChild(div);
            });
        }

        function saveAns(id, val) {
            respostas[id] = val;
            console.log("Resposta salva:", respostas);
            if(Object.keys(respostas).length === 5) {
                alert("DNA MAPEADO. SISTEMA EM ANÁLISE.");
            }
        }

        window.onload = typeM;
    </script>
</body>
</html>
